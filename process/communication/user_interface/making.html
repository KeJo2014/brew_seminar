<!doctype html>

<html lang="de">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Zubereitung</title>
    <meta name="description" content="Zubereitung">
    <meta name="author" content="J">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/styles.css?v=1.0">


    <script src="https://kit.fontawesome.com/01fe45157f.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

</head>

<body id="making-html">
    <div class="row">
        <div id="c-column">
            <h1 class="site-title" id="title-m">Zubereitung</h1>
            <table id="recipe-info">
            <tr>
                <td id="recipe_name">Rezeptname</td>
                <td id="date">Datum</td>
            </tr>
            </table>
            <div class="glass-div centered">
                <img id="model" src="img/brautopf.png" alt="brautopf">
                <table class="list">
                    <tr>
                        <th>Phase</th>
                        <td id="phase">Maischen</td>
                    </tr>
                    <tr>
                        <th>Temperatur</th>
                        <td id="temp">78°C</td>
                    </tr>
                    <tr>
                        <th>Rührwerk</th>
                        <td id="engine"><h5>ON</h5></td>
                    </tr>
                </table>
            </div>
            <div class="glass-div control-bar">
                <button class="btn" id="but-undo" onclick="undo()">
                    <i class="fas fa-arrow-left fa-5x"></i>
                    <h5>Zurück</h3>
                </button>
                    <button class="btn"  id="but-start" onclick="start()">
                        <i class="fas fa-play fa-lg"></i>
                        <h5>Start</h3>
                    </button>
                    <button class="btn"  id="but-file" onclick="protocol()">
                        <i class="fas fa-file fa-lg"></i>
                        <h5>Protokoll</h3>
                    </button>
                <button class="btn"  id="but-next" onclick="next()">
                    <i class="fas fa-arrow-right fa-5x"></i>
                    <h5>Weiter</h3>
                </button>
                <!-- <button id="but-stop" onclick="stop()"><i class="fas fa-stop fa-5x"></i><h3>Stop</h3></button> -->
                <!-- <button id="but-reset" onclick="reset()">Reset</button> -->

            </div>
        </div>
        <div id="r-column">
            <div class="glass-div recipe">
                <table id="recipe-output">
                    <tr>
                        <th class="step">momentaner Schritt</th>
                    </tr>
                    <tr>
                        <th class="p-title" id="current_title">Prozesstitel</th>
                    </tr>
                    <tr>
                        <td class="p-content" id="step_content">
                            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut
                            labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores
                            et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.
                            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut
                            labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores
                            et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.
                        </td>
                    </tr>
                    <tr>
                        <th class="step">nächster Schritt</th>
                    </tr>
                    <tr>
                        <th class="p-title" id="next_title">Prozesstitel</th>
                    </tr>
                    <tr>
                        <td class="p-content" id="next_step">
                            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut
                            labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores
                            et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.
                            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut
                            labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores
                            et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.
                        </td>
                    </tr>
                </table>
            </div>

        </div>
    </div>
</body>
<script src="js/websocket_connection.js"></script>
<script src="js/decription.js"></script>
<script src="js/create_pdf.js"></script>
<script>
    setTimeout(function (){
  
    // Something you want delayed.
    start();
    //get recipe
    
    //load recipe
    rec = get_recipe_content();

    //set static
    console.log(get_recipe_content())
    document.getElementById("recipe_name").innerHTML = decript(rec.recipe.name);

    //set date
    var today = new Date();
    var dd = String(today.getDate()).padStart(2, '0');
    var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
    var yyyy = today.getFullYear();

    today = dd + '.' + mm + '.' + yyyy;
    document.getElementById("date").innerHTML = today;

    document.getElementById("phase").innerHTML = decript(rec.roadmap.points[get_step_number()]);

    document.getElementById("temp").innerHTML = get_temp()+"°C";

    document.getElementById("engine").innerHTML = get_engine();

    document.getElementById("current_title").innerHTML = decript(rec.roadmap.points[get_step_number()]);
    
    document.getElementById("step_content").innerHTML = decript(rec.roadmap.notes[get_step_number()]);

    

    if(get_step_number()+1 == rec.roadmap.notes.length){
        document.getElementById("next_title").innerHTML = "Ende";
        document.getElementById("next_step").innerHTML = "Das Rezept ist abgeschlossen.";
    }else{
        document.getElementById("next_step").innerHTML = decript(rec.roadmap.notes[get_step_number()+1]);
        document.getElementById("next_title").innerHTML = decript(rec.roadmap.points[get_step_number()+1]);
    }

}, 1000); // How long you want the delay to be, measured in milliseconds.
        
    function update_interface(){
        rec = get_recipe_content();
        document.getElementById("phase").innerHTML = decript(rec.roadmap.points[get_step_number()]);
        document.getElementById("temp").innerHTML = get_temp()+"°C";
        document.getElementById("engine").innerHTML = get_engine();
        document.getElementById("current_title").innerHTML = decript(rec.roadmap.points[get_step_number()]);
        document.getElementById("step_content").innerHTML = decript(rec.roadmap.notes[get_step_number()]);
        if(get_step_number()+1 == rec.roadmap.notes.length){
        document.getElementById("next_title").innerHTML = "Ende";
        document.getElementById("next_step").innerHTML = "Das Rezept ist abgeschlossen.";
        }else{
            document.getElementById("next_step").innerHTML = decript(rec.roadmap.notes[get_step_number()+1]);
            document.getElementById("next_title").innerHTML = decript(rec.roadmap.points[get_step_number()+1]);
        }
   }
</script>


</html>